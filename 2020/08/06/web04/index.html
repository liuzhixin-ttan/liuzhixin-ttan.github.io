<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Web前端 (4) JavaScript进阶 | Hexo</title><meta name="description" content="原型与原型链函数的prototype属性 每个函数都有一个prototype属性, 它默认指向一个Object空对象(即称为: 原型对象)  原型对象中有一个属性constructor, 它指向函数对象 123456function fn() &amp;#123;&amp;#125;console.log(Date.prototype, typeof Date.prototype)  &#x3D;&gt;Objectcon"><meta name="keywords" content="web前端,知识总结,JS,进阶"><meta name="author" content="ttan12138"><meta name="copyright" content="ttan12138"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://yoursite.com/2020/08/06/web04/"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta property="og:type" content="article"><meta property="og:title" content="Web前端 (4) JavaScript进阶"><meta property="og:url" content="http://yoursite.com/2020/08/06/web04/"><meta property="og:site_name" content="Hexo"><meta property="og:description" content="原型与原型链函数的prototype属性 每个函数都有一个prototype属性, 它默认指向一个Object空对象(即称为: 原型对象)  原型对象中有一个属性constructor, 它指向函数对象 123456function fn() &amp;#123;&amp;#125;console.log(Date.prototype, typeof Date.prototype)  &#x3D;&gt;Objectcon"><meta property="og:image" content="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"><meta property="article:published_time" content="2020-08-06T11:24:41.000Z"><meta property="article:modified_time" content="2020-08-06T12:40:45.666Z"><meta name="twitter:card" content="summary"><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff')
  }
}

var getCookies = function (name) {
  const value = `; ${document.cookie}`
  const parts = value.split(`; ${name}=`)
  if (parts.length === 2) return parts.pop().split(';').shift()
}

var autoChangeMode = 'false'
var t = getCookies('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (Cookies.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="prev" title="Web前端 (2) CSS基础知识总结" href="http://yoursite.com/2020/08/06/web02/"><link rel="next" title="Web前端 (5) JS简单实践（一）" href="http://yoursite.com/2020/08/06/web05/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: false,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false    
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true
  }</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 5.0.0"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">6</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">10</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">1</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8E%9F%E5%9E%8B%E4%B8%8E%E5%8E%9F%E5%9E%8B%E9%93%BE"><span class="toc-number">1.</span> <span class="toc-text">原型与原型链</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E7%9A%84prototype%E5%B1%9E%E6%80%A7"><span class="toc-number">1.1.</span> <span class="toc-text">函数的prototype属性</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BB%99%E5%8E%9F%E5%9E%8B%E5%AF%B9%E8%B1%A1%E6%B7%BB%E5%8A%A0%E5%B1%9E%E6%80%A7-%E4%B8%80%E8%88%AC%E9%83%BD%E6%98%AF%E6%96%B9%E6%B3%95"><span class="toc-number">1.2.</span> <span class="toc-text">给原型对象添加属性(一般都是方法)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%98%BE%E5%BC%8F%E5%8E%9F%E5%9E%8B%E4%B8%8E%E9%9A%90%E5%BC%8F%E5%8E%9F%E5%9E%8B"><span class="toc-number">1.3.</span> <span class="toc-text">显式原型与隐式原型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8E%9F%E5%9E%8B%E9%93%BE-%E9%9A%90%E5%BC%8F%E5%8E%9F%E5%9E%8B%E9%93%BE"><span class="toc-number">1.4.</span> <span class="toc-text">原型链 (隐式原型链)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#instanceof-%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">1.5.</span> <span class="toc-text">instanceof 运算符</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%A7%E8%A1%8C%E4%B8%8A%E4%B8%8B%E6%96%87%E4%B8%8E%E6%89%A7%E8%A1%8C%E4%B8%8A%E4%B8%8B%E6%96%87%E6%A0%88"><span class="toc-number">2.</span> <span class="toc-text">执行上下文与执行上下文栈</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%89%A7%E8%A1%8C%E4%B8%8A%E4%B8%8B%E6%96%87"><span class="toc-number">2.1.</span> <span class="toc-text">执行上下文</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%89%A7%E8%A1%8C%E4%B8%8A%E4%B8%8B%E6%96%87%E6%A0%88-JavaScript-%E7%9A%84%E8%B0%83%E7%94%A8%E6%A0%88"><span class="toc-number">2.2.</span> <span class="toc-text">执行上下文栈(JavaScript 的调用栈)</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%9C%E7%94%A8%E5%9F%9F%E4%B8%8E%E4%BD%9C%E7%94%A8%E5%9F%9F%E9%93%BE"><span class="toc-number">3.</span> <span class="toc-text">作用域与作用域链</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-number">3.1.</span> <span class="toc-text">作用域</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%9C%E7%94%A8%E5%9F%9F%E9%93%BE"><span class="toc-number">3.2.</span> <span class="toc-text">作用域链</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8C%89%E4%BD%9C%E7%94%A8%E5%9F%9F%E9%93%BE%E6%9F%A5%E6%89%BE%E4%B8%80%E4%B8%AA%E5%8F%98%E9%87%8F%E7%9A%84%E6%9F%A5%E6%89%BE%E8%A7%84%E5%88%99"><span class="toc-number">3.3.</span> <span class="toc-text">按作用域链查找一个变量的查找规则</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%8E%E6%89%A7%E8%A1%8C%E4%B8%8A%E4%B8%8B%E6%96%87%E7%9A%84%E5%8C%BA%E5%88%AB%E5%92%8C%E8%81%94%E7%B3%BB"><span class="toc-number">3.4.</span> <span class="toc-text">与执行上下文的区别和联系</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%97%AD%E5%8C%85"><span class="toc-number">4.</span> <span class="toc-text">闭包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E5%88%9B%E5%BB%BA%E4%B8%8E%E7%BB%A7%E6%89%BF"><span class="toc-number">5.</span> <span class="toc-text">对象创建与继承</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%88%9B%E5%BB%BA"><span class="toc-number">5.1.</span> <span class="toc-text">对象的创建</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E7%9A%84%E7%BB%A7%E6%89%BF"><span class="toc-number">5.2.</span> <span class="toc-text">对象的继承</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B%E6%9C%BA%E5%88%B6%E4%B8%8E%E4%BA%8B%E4%BB%B6%E6%9C%BA%E5%88%B6"><span class="toc-number">6.</span> <span class="toc-text">线程机制与事件机制</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B"><span class="toc-number">6.1.</span> <span class="toc-text">进程与线程</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E5%86%85%E6%A0%B8"><span class="toc-number">6.2.</span> <span class="toc-text">浏览器内核</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#JS%E6%98%AF%E5%8D%95%E7%BA%BF%E7%A8%8B%E7%9A%84"><span class="toc-number">6.3.</span> <span class="toc-text">JS是单线程的</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B6%E4%BB%96"><span class="toc-number">7.</span> <span class="toc-text">其他</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%86%E5%8F%B7%E9%97%AE%E9%A2%98"><span class="toc-number">7.1.</span> <span class="toc-text">分号问题</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F%E4%B8%8E%E5%86%85%E5%AD%98%E6%BA%A2%E5%87%BA"><span class="toc-number">7.2.</span> <span class="toc-text">内存泄漏与内存溢出</span></a></li></ol></li></ol></div></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">Hexo</a></span><span class="pull-right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">Web前端 (4) JavaScript进阶</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2020-08-06 19:24:41"><i class="far fa-calendar-alt fa-fw"></i> 发表于 2020-08-06</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2020-08-06 20:40:45"><i class="fas fa-history fa-fw"></i> 更新于 2020-08-06</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fas fa-inbox fa-fw post-meta__icon"></i><a class="post-meta__categories" href="/categories/web%E5%89%8D%E7%AB%AF/">web前端</a></span></div><div class="meta-secondline"> </div><div class="meta-thirdline"><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta__icon"></i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h4 id="原型与原型链"><a href="#原型与原型链" class="headerlink" title="原型与原型链"></a>原型与原型链</h4><h5 id="函数的prototype属性"><a href="#函数的prototype属性" class="headerlink" title="函数的prototype属性"></a>函数的prototype属性</h5><ul>
<li><p>每个函数都有一个prototype属性, 它默认指向一个Object空对象(即称为: 原型对象)</p>
</li>
<li><p>原型对象中有一个属性constructor, 它指向函数对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Date</span>.prototype, <span class="keyword">typeof</span> <span class="built_in">Date</span>.prototype)  =&gt;<span class="built_in">Object</span></span><br><span class="line"><span class="built_in">console</span>.log(fn.prototype, <span class="keyword">typeof</span> fn.prototype)  =&gt;<span class="built_in">Object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Date</span>.prototype.constructor===<span class="built_in">Date</span>)  =&gt;<span class="literal">true</span></span><br><span class="line"><span class="built_in">console</span>.log(fn.prototype.constructor===fn)  =&gt;<span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h5 id="给原型对象添加属性-一般都是方法"><a href="#给原型对象添加属性-一般都是方法" class="headerlink" title="给原型对象添加属性(一般都是方法)"></a>给原型对象添加属性(一般都是方法)</h5></li>
<li><p>作用: 函数的所有实例对象自动拥有原型中的属性(方法)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">F.prototype.age = <span class="number">12</span> <span class="comment">//添加属性</span></span><br><span class="line">F.prototype.setAge = <span class="function"><span class="keyword">function</span> (<span class="params">age</span>) </span>&#123; <span class="comment">// 添加方法</span></span><br><span class="line">  <span class="built_in">this</span>.age = age</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 创建函数的实例对象</span></span><br><span class="line"><span class="keyword">var</span> f = <span class="keyword">new</span> F()</span><br><span class="line"><span class="built_in">console</span>.log(f.age)</span><br><span class="line">f.setAge(<span class="number">23</span>)</span><br><span class="line"><span class="built_in">console</span>.log(f.age)</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h5 id="显式原型与隐式原型"><a href="#显式原型与隐式原型" class="headerlink" title="显式原型与隐式原型"></a>显式原型与隐式原型</h5><ul>
<li><p>每个函数function都有一个<code>prototype</code>属性(属性值是对象)，即显式原型；每个实例对象都有一个<code>__proto__</code>，可称为隐式原型</p>
</li>
<li><p>函数的<code>prototype</code>属性: 在定义函数时自动添加的，属性值是一个对象，默认值是一个空Object对象</p>
</li>
<li><p>对象的<code>__proto__</code>属性: 创建对象时自动添加的, 属性值是当前实例所属类的<code>prototype</code>原型</p>
</li>
<li><p>在<code>prototype</code>原型对象中，默认存在一个<code>constructor</code>属性，属性值就是当前函数本身</p>
</li>
<li><p>内存结构</p>
</li>
</ul>
<p><img src= "/img/loading.gif" data-src="/2020/08/06/web04/01.png" alt="01"></p>
<ul>
<li>ES6之前，程序员能直接操作显式原型, 但不能直接操作隐式原型</li>
</ul>
<h5 id="原型链-隐式原型链"><a href="#原型链-隐式原型链" class="headerlink" title="原型链 (隐式原型链)"></a>原型链 (隐式原型链)</h5><ul>
<li><p>访问一个对象的属性时，</p>
<p>① 先在自身属性中查找，找到返回</p>
<p>② 如果没有, 再沿着__proto__这条链向上查找, 找到返回</p>
<p>③ 如果最终没找到, 返回undefined</p>
</li>
</ul>
<ul>
<li>构造函数/原型/实体对象的关系</li>
</ul>
<p><img src= "/img/loading.gif" data-src="/2020/08/06/web04/02.png" alt="02"></p>
<p><img src= "/img/loading.gif" data-src="/2020/08/06/web04/03.png" alt="03"></p>
<h5 id="instanceof-运算符"><a href="#instanceof-运算符" class="headerlink" title="instanceof 运算符"></a>instanceof 运算符</h5><p>用于检测构造函数的 prototype 属性是否出现在某个实例对象的原型链上。</p>
<p>表达式: A instanceof B</p>
<p>如果B函数的显式原型对象在A对象的原型链上, 返回true, 否则返回false</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params"></span>) </span>&#123;  &#125;</span><br><span class="line"><span class="keyword">var</span> f1 = <span class="keyword">new</span> Foo();</span><br><span class="line"><span class="built_in">console</span>.log(f1 <span class="keyword">instanceof</span> Foo);</span><br><span class="line"><span class="built_in">console</span>.log(f1 <span class="keyword">instanceof</span> <span class="built_in">Object</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span> <span class="keyword">instanceof</span> <span class="built_in">Function</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span> <span class="keyword">instanceof</span> <span class="built_in">Object</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Function</span> <span class="keyword">instanceof</span> <span class="built_in">Object</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Function</span> <span class="keyword">instanceof</span> <span class="built_in">Function</span>)</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span> <span class="keyword">instanceof</span>  Foo);</span><br></pre></td></tr></table></figure>



<h4 id="执行上下文与执行上下文栈"><a href="#执行上下文与执行上下文栈" class="headerlink" title="执行上下文与执行上下文栈"></a>执行上下文与执行上下文栈</h4><h5 id="执行上下文"><a href="#执行上下文" class="headerlink" title="执行上下文"></a>执行上下文</h5><ol>
<li><p>全局执行上下文</p>
<ul>
<li>在执行全局代码前将window确定为全局执行上下文</li>
<li>对全局数据进行预处理<ul>
<li>var定义的全局变量==&gt;undefined, 添加为window的属性</li>
<li>function声明的全局函数==&gt;赋值(fun), 添加为window的方法</li>
<li>this==&gt;赋值(window)</li>
</ul>
</li>
<li>开始执行全局代码</li>
</ul>
</li>
<li><p>函数执行上下文</p>
<ul>
<li>在调用函数, 准备执行函数体之前, 创建对应的函数执行上下文对象</li>
<li>对局部数据进行预处理<ul>
<li>形参变量==&gt;赋值(实参)==&gt;添加为执行上下文的属性</li>
<li>arguments==&gt;赋值(实参列表), 添加为执行上下文的属性</li>
<li>var定义的局部变量==&gt;undefined, 添加为执行上下文的属性</li>
<li>function声明的函数 ==&gt;赋值(fun), 添加为执行上下文的方法</li>
<li>this==&gt;赋值(调用函数的对象)</li>
</ul>
</li>
<li>开始执行函数体代码</li>
</ul>
</li>
</ol>
<h5 id="执行上下文栈-JavaScript-的调用栈"><a href="#执行上下文栈-JavaScript-的调用栈" class="headerlink" title="执行上下文栈(JavaScript 的调用栈)"></a>执行上下文栈(JavaScript 的调用栈)</h5><ul>
<li>在全局代码执行前，JavaScript 引擎会将执行上下文压入栈空间中，通常把这种用来管理执行上下文的栈称为执行上下文栈，又称调用栈。</li>
<li>在全局执行上下文(window)确定后, 将其添加到栈中(压栈)</li>
<li>在函数执行上下文创建后, 将其添加到栈中(压栈)</li>
<li>在当前函数执行完后,将栈顶的对象移除(出栈)</li>
<li>当所有的代码执行完后, 栈中只剩下window</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 进入全局执行上下文</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">10</span></span><br><span class="line"><span class="keyword">var</span> bar = <span class="function"><span class="keyword">function</span> (<span class="params">x</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> b = <span class="number">5</span></span><br><span class="line">  foo(x + b)              <span class="comment">//3. 进入foo执行上下文</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> foo = <span class="function"><span class="keyword">function</span> (<span class="params">y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> c = <span class="number">5</span></span><br><span class="line">    <span class="built_in">console</span>.log(a + c + y)</span><br><span class="line">&#125;</span><br><span class="line">bar(<span class="number">10</span>)                    <span class="comment">//2. 进入bar函数执行上下文</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 依次输出什么?</span></span><br><span class="line"><span class="comment">//2. 整个过程中产生了几个执行上下文?</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;global begin: &#x27;</span>+ i)</span><br><span class="line"><span class="keyword">var</span> i = <span class="number">1</span></span><br><span class="line">foo(<span class="number">1</span>);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">i</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (i == <span class="number">4</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;foo() begin:&#x27;</span> + i);</span><br><span class="line">  foo(i + <span class="number">1</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;foo() end:&#x27;</span> + i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;global end: &#x27;</span> + i)</span><br></pre></td></tr></table></figure>

<h4 id="作用域与作用域链"><a href="#作用域与作用域链" class="headerlink" title="作用域与作用域链"></a>作用域与作用域链</h4><h5 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h5><ul>
<li><p>就是一块”地盘”, 一个代码段所在的区域</p>
</li>
<li><p>它是静态的(相对于上下文对象), 在编写代码时就确定了</p>
</li>
<li><p>分为全局作用域函数作用域，没有块作用域(ES6有)</p>
</li>
<li><p>隔离变量，不同作用域下同名变量不会有冲突</p>
</li>
</ul>
<h5 id="作用域链"><a href="#作用域链" class="headerlink" title="作用域链"></a>作用域链</h5><ul>
<li>多个上下级关系的作用域形成的链, 它的方向是从下向上的(从内到外)</li>
<li>查找变量时就是沿着作用域链来查找的</li>
</ul>
<h5 id="按作用域链查找一个变量的查找规则"><a href="#按作用域链查找一个变量的查找规则" class="headerlink" title="按作用域链查找一个变量的查找规则"></a>按作用域链查找一个变量的查找规则</h5><p>①在当前作用域下的执行上下文中查找对应的属性, 如果有直接返回, 否则进入2，</p>
<p>②在上一级作用域的执行上下文中查找对应的属性, 如果有直接返回, 否则进入3，</p>
<p>③再次执行2的相同操作, 直到全局作用域, 如果还找不到就抛出找不到的异常。</p>
<h5 id="与执行上下文的区别和联系"><a href="#与执行上下文的区别和联系" class="headerlink" title="与执行上下文的区别和联系"></a>与执行上下文的区别和联系</h5><p>-&gt; 区别1</p>
<ul>
<li>全局作用域之外，每个函数都会创建自己的作用域，作用域在函数定义时就已经确定了。而不是在函数调用时</li>
<li>全局执行上下文环境是在全局作用域确定之后, js代码马上执行之前创建</li>
<li>函数执行上下文环境是在调用函数时, 函数体代码执行之前创建</li>
</ul>
<p>-&gt; 区别2</p>
<ul>
<li>作用域是静态的, 只要函数定义好了就一直存在, 且不会再变化</li>
<li>上下文环境是动态的, 调用函数时创建, 函数调用结束时上下文环境就会被释放</li>
</ul>
<p>-&gt; 联系</p>
<ul>
<li><p>上下文环境(对象)是从属于所在的作用域</p>
</li>
<li><p>全局上下文环境==&gt;全局作用域</p>
</li>
<li><p>函数上下文环境==&gt;对应的函数使用域</p>
</li>
</ul>
<h4 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h4><ol>
<li><p>闭包的产生</p>
<ul>
<li><p><strong>函数A执行时，导致其内部的函数B被返回到外部并保存时</strong></p>
</li>
<li><p>产生条件</p>
<ul>
<li><p>函数嵌套</p>
</li>
<li><p>内部函数引用了外部函数的数据(变量/函数)</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>常见闭包</p>
<p>①将函数作为另一个函数的返回值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">2</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">fn2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    a++            <span class="comment">//引用外部函数变量，产生闭包</span></span><br><span class="line">    <span class="built_in">console</span>.log(a)  <span class="comment">//产生</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> fn2</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> f = fn1() </span><br><span class="line">f() <span class="comment">// 3</span></span><br><span class="line">f() <span class="comment">// 4</span></span><br><span class="line">f = <span class="literal">null</span>  <span class="comment">//及时释放--&gt;死亡</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//应用闭包--封装自定义模块1</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">coolModule</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//私有的数据</span></span><br><span class="line">  <span class="keyword">var</span> msg = <span class="string">&#x27;atguigu&#x27;</span></span><br><span class="line">  <span class="keyword">var</span> names = [<span class="string">&#x27;I&#x27;</span>, <span class="string">&#x27;Love&#x27;</span>, <span class="string">&#x27;you&#x27;</span>]</span><br><span class="line"></span><br><span class="line">  <span class="comment">//私有的操作数据的函数</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">doSomething</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(msg.toUpperCase())</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">doOtherthing</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(names.join(<span class="string">&#x27; &#x27;</span>))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//向外暴露包含多个方法的对象</span></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    doSomething: doSomething,</span><br><span class="line">    doOtherthing: doOtherthing</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>②将函数作为实参传递给另一个函数调用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showMsgDelay</span>(<span class="params">msg, time</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(msg)</span><br><span class="line">  &#125;, time)</span><br><span class="line">&#125;</span><br><span class="line">showMsgDelay(<span class="string">&#x27;hello&#x27;</span>, <span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//应用闭包--封装自定义模块2</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">window</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//私有的数据</span></span><br><span class="line">  <span class="keyword">var</span> msg = <span class="string">&#x27;atguigu&#x27;</span></span><br><span class="line">  <span class="keyword">var</span> names = [<span class="string">&#x27;I&#x27;</span>, <span class="string">&#x27;Love&#x27;</span>, <span class="string">&#x27;you&#x27;</span>]</span><br><span class="line">  <span class="comment">//操作数据的函数</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(msg.toUpperCase())</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(names.join(<span class="string">&#x27; &#x27;</span>))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">window</span>.coolModule2 =  &#123;</span><br><span class="line">    doSomething: a,</span><br><span class="line">    doOtherthing: b</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)(<span class="built_in">window</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>闭包的作用</p>
<ul>
<li><p>使用函数内部的变量在函数执行完后, 仍然存活在内存中(延长了局部变量的生命周期)</p>
</li>
<li><p>让函数外部可以操作(读写)到函数内部的数据(变量/函数)</p>
</li>
</ul>
</li>
<li><p>闭包的生命周期</p>
<ul>
<li>产生：在嵌套内部函数定义执行完。</li>
<li>死亡：在嵌套内部函数成为垃圾对象时。</li>
<li>如上2-①</li>
</ul>
</li>
<li><p>关于闭包的几点问题</p>
<ul>
<li><p>函数执行完后, 函数内部声明的局部变量是否还存在?</p>
<p>如上2-①中，由于f引用内部函数 –&gt; 内部函数以及闭包都没有成为垃圾对象</p>
</li>
<li><p>在函数外部能直接访问函数内部的局部变量吗?</p>
<p>如上2-①中，调用f()时间接操作了函数内部的局部变量。</p>
</li>
<li><p>函数执行完，闭包局部变量没有释放，内存占用时间变长，容易内存泄漏，应及时释放。</p>
</li>
</ul>
</li>
<li><p>体会闭包</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;代码片段一</span><br><span class="line">  var name &#x3D; &quot;The Window&quot;;</span><br><span class="line">  var object &#x3D; &#123;</span><br><span class="line">    name: &quot;My Object&quot;,</span><br><span class="line">    getNameFunc: function () &#123;</span><br><span class="line">      return function () &#123;</span><br><span class="line">        return this.name;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  console.log(object.getNameFunc()());  &#x2F;&#x2F;The Window</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;代码片段二</span><br><span class="line">  var name2 &#x3D; &quot;The Window&quot;;</span><br><span class="line">  var object2 &#x3D; &#123;</span><br><span class="line">    name2: &quot;My Object&quot;,</span><br><span class="line">    getNameFunc: function () &#123;</span><br><span class="line">      var that &#x3D; this;</span><br><span class="line">      return function () &#123;</span><br><span class="line">        return that.name2;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  console.log(object2.getNameFunc()());&#x2F;&#x2F;My Object</span><br><span class="line">  </span><br><span class="line">&#x2F;&#x2F;代码片段三</span><br><span class="line">  function fun(n, o) &#123;</span><br><span class="line">    console.log(o)</span><br><span class="line">    return &#123;</span><br><span class="line">      fun: function (m) &#123;</span><br><span class="line">        return fun(m, n)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  var a &#x3D; fun(0)</span><br><span class="line">  a.fun(1)</span><br><span class="line">  a.fun(2)</span><br><span class="line">  a.fun(3) &#x2F;&#x2F;undefined,0,0,0</span><br><span class="line"></span><br><span class="line">  var b &#x3D; fun(0).fun(1).fun(2).fun(3) &#x2F;&#x2F;undefined,0,1,2</span><br><span class="line"></span><br><span class="line">  var c &#x3D; fun(0).fun(1)</span><br><span class="line">  c.fun(2)</span><br><span class="line">  c.fun(3) &#x2F;&#x2F;undefined,0,1,1</span><br><span class="line"></span><br></pre></td></tr></table></figure>



</li>
</ol>
<h4 id="对象创建与继承"><a href="#对象创建与继承" class="headerlink" title="对象创建与继承"></a>对象创建与继承</h4><h5 id="对象的创建"><a href="#对象的创建" class="headerlink" title="对象的创建"></a>对象的创建</h5><ul>
<li><p>Object构造函数模式</p>
<ul>
<li><p>套路: 先创建空Object对象, 再动态添加属性/方法</p>
</li>
<li><p>适用场景: 起始时不确定对象内部数据</p>
</li>
<li><p>问题: 语句太多</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> <span class="built_in">Object</span>()</span><br><span class="line">p = &#123;&#125;</span><br><span class="line">p.name = <span class="string">&#x27;Tom&#x27;</span></span><br><span class="line">p.age = <span class="number">12</span></span><br><span class="line">p.setName = <span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name</span><br><span class="line">&#125;</span><br><span class="line">p.setaAge = <span class="function"><span class="keyword">function</span> (<span class="params">age</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.age = age</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(p)</span><br></pre></td></tr></table></figure>



</li>
</ul>
</li>
</ul>
<ul>
<li><p>对象字面量模式</p>
<ul>
<li><p>套路: 使用{}创建对象, 同时指定属性/方法</p>
</li>
<li><p>适用场景: 起始时对象内部数据是确定的</p>
</li>
<li><p>问题: 如果创建多个对象, 有重复代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p = &#123;</span><br><span class="line">  name: <span class="string">&#x27;Tom&#x27;</span>,</span><br><span class="line">  age: <span class="number">23</span>,</span><br><span class="line">  setName: <span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(p.name, p.age)</span><br><span class="line">p.setName(<span class="string">&#x27;JACK&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(p.name, p.age)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p2 = &#123;</span><br><span class="line">  name: <span class="string">&#x27;BOB&#x27;</span>,</span><br><span class="line">  age: <span class="number">24</span>,</span><br><span class="line">  setName: <span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>工厂模式</p>
<ul>
<li><p>套路: 通过工厂函数动态创建对象并返回</p>
</li>
<li><p>适用场景: 需要创建多个对象</p>
</li>
<li><p>问题: 对象没有一个具体的类型, 都是Object类型</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createPerson</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> p = &#123;</span><br><span class="line">   name: name,</span><br><span class="line">   age: age,</span><br><span class="line">   setName: <span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">     <span class="built_in">this</span>.name = name</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> p</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p1 = createPerson(<span class="string">&#x27;Tom&#x27;</span>, <span class="number">12</span>)</span><br><span class="line"><span class="keyword">var</span> p2 = createPerson(<span class="string">&#x27;JAck&#x27;</span>, <span class="number">13</span>)</span><br><span class="line"><span class="built_in">console</span>.log(p1)</span><br><span class="line"><span class="built_in">console</span>.log(p2)</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>自定义构造函数模式</p>
<ul>
<li><p>套路: 自定义构造函数, 通过new创建对象</p>
</li>
<li><p>适用场景: 需要创建多个类型确定的对象</p>
</li>
<li><p>问题: 每个对象都有相同的数据, 浪费内存</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name</span><br><span class="line">  <span class="built_in">this</span>.age = age</span><br><span class="line">  <span class="built_in">this</span>.setName = <span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> Person(<span class="string">&#x27;Tom&#x27;</span>, <span class="number">12</span>)</span><br><span class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> Person(<span class="string">&#x27;Tom2&#x27;</span>, <span class="number">13</span>)</span><br><span class="line"><span class="built_in">console</span>.log(p1, p1 <span class="keyword">instanceof</span> Person)</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>构造函数+原型的组合模式</p>
<ul>
<li><p>套路: 自定义构造函数, 属性在函数中初始化, 方法添加到原型上</p>
</li>
<li><p>适用场景: 需要创建多个类型确定的对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span> (<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name</span><br><span class="line">  <span class="built_in">this</span>.age = age</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.setName = <span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> Person(<span class="string">&#x27;Tom&#x27;</span>, <span class="number">12</span>)</span><br><span class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> Person(<span class="string">&#x27;JAck&#x27;</span>, <span class="number">23</span>)</span><br><span class="line">p1.setName(<span class="string">&#x27;TOM3&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(p1)</span><br><span class="line"></span><br><span class="line">Person.prototype.setAge = <span class="function"><span class="keyword">function</span> (<span class="params">age</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.age = age</span><br><span class="line">&#125;</span><br><span class="line">p1.setAge(<span class="number">23</span>)</span><br><span class="line"><span class="built_in">console</span>.log(p1.age)</span><br><span class="line"></span><br><span class="line">Person.prototype = &#123;&#125;</span><br><span class="line">p1.setAge(<span class="number">34</span>)</span><br><span class="line"><span class="built_in">console</span>.log(p1)</span><br><span class="line"><span class="keyword">var</span> p3 = <span class="keyword">new</span> Person(<span class="string">&#x27;BOB&#x27;</span>, <span class="number">12</span>)</span><br><span class="line">p3.setAge(<span class="number">12</span>)</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<h5 id="对象的继承"><a href="#对象的继承" class="headerlink" title="对象的继承"></a>对象的继承</h5><ul>
<li><p>原型链继承</p>
<ul>
<li><p>套路：</p>
<p>①定义父类型构造函数</p>
<p>②给父类型的原型添加方法</p>
<p>③定义子类型的构造函数</p>
<p>④创建父类型的对象赋值给子类型的原型</p>
<p>⑤将子类型原型的构造属性设置为子类型</p>
<p>⑥给子类型原型添加方法</p>
<p>⑦创建子类型的对象: 可以调用父类型的方法</p>
<ul>
<li><p>关键：子类型的原型为父类型的一个实例对象</p>
   <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Supper</span>(<span class="params"></span>) </span>&#123; <span class="comment">//父类型</span></span><br><span class="line">  <span class="built_in">this</span>.superProp = <span class="string">&#x27;The super prop&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//原型的数据所有的实例对象都可见</span></span><br><span class="line">Supper.prototype.showSupperProp = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.superProp)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Sub</span>(<span class="params"></span>) </span>&#123; <span class="comment">//子类型</span></span><br><span class="line">  <span class="built_in">this</span>.subProp = <span class="string">&#x27;The sub prop&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 子类的原型为父类的实例</span></span><br><span class="line">Sub.prototype = <span class="keyword">new</span> Supper()</span><br><span class="line"><span class="comment">// 修正Sub.prototype.constructor为Sub本身</span></span><br><span class="line">Sub.prototype.constructor = Sub</span><br><span class="line"></span><br><span class="line">Sub.prototype.showSubProp = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.subProp)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建子类型的实例</span></span><br><span class="line"><span class="keyword">var</span> sub = <span class="keyword">new</span> Sub()</span><br><span class="line"><span class="comment">// 调用父类型的方法</span></span><br><span class="line">sub.showSubProp()</span><br><span class="line"><span class="comment">// 调用子类型的方法</span></span><br><span class="line">sub.showSupperProp()</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
<li><p>借用构造函数继承(假的)</p>
<ul>
<li><p>套路:</p>
<p>①定义父类型构造函数</p>
<p>②定义子类型构造函数</p>
<p>③在子类型构造函数中调用父类型构造</p>
</li>
<li><p>关键: 在子类型构造函数中通用super()调用父类型构造函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name</span><br><span class="line">  <span class="built_in">this</span>.age = age</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">name, age, price</span>) </span>&#123;</span><br><span class="line">  Person.call(<span class="built_in">this</span>, name, age)   <span class="comment">// this.Person(name, age)</span></span><br><span class="line">  <span class="built_in">this</span>.price = price</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> s = <span class="keyword">new</span> Student(<span class="string">&#x27;Tom&#x27;</span>, <span class="number">20</span>, <span class="number">12000</span>)</span><br><span class="line"><span class="built_in">console</span>.log(s.name, s.age, s.price)</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>原型链+借用构造函数的组合继承</p>
<ul>
<li><p>套路</p>
<p>①利用原型链实现对父类型对象的方法继承</p>
<p>②利用call()借用父类型构建函数初始化相同属性</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name</span><br><span class="line">  <span class="built_in">this</span>.age = age</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.setName = <span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">name, age, price</span>) </span>&#123;</span><br><span class="line">  Person.call(<span class="built_in">this</span>, name, age) <span class="comment">//得到父类型的属性</span></span><br><span class="line">  <span class="built_in">this</span>.price = price</span><br><span class="line">&#125;</span><br><span class="line">Student.prototype = <span class="keyword">new</span> Person()  <span class="comment">//得到父类型的方法</span></span><br><span class="line">Student.prototype.constructor = Student</span><br><span class="line">Student.prototype.setPrice = <span class="function"><span class="keyword">function</span> (<span class="params">price</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.price = price</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> s = <span class="keyword">new</span> Student(<span class="string">&#x27;Tom&#x27;</span>, <span class="number">12</span>, <span class="number">10000</span>)</span><br><span class="line">s.setPrice(<span class="number">11000</span>)</span><br><span class="line">s.setName(<span class="string">&#x27;Bob&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(s)</span><br><span class="line"><span class="built_in">console</span>.log(s.constructor)</span><br></pre></td></tr></table></figure>



</li>
</ul>
</li>
</ul>
<h4 id="线程机制与事件机制"><a href="#线程机制与事件机制" class="headerlink" title="线程机制与事件机制"></a>线程机制与事件机制</h4><h5 id="进程与线程"><a href="#进程与线程" class="headerlink" title="进程与线程"></a>进程与线程</h5><ul>
<li><p>概念</p>
<p>进程：程序的一次执行, 它占有一片独有的内存空间</p>
</li>
</ul>
<p>​       线程： CPU的基本调度单位, 是程序执行的一个完整流程</p>
<ul>
<li><p>特点</p>
<ul>
<li><p>一个进程中一般至少有一个运行的线程: 主线程</p>
</li>
<li><p>一个进程中也可以同时运行多个线程, 我们会说程序是多线程运行的</p>
</li>
<li><p>一个进程内的数据可以供其中的多个线程直接共享</p>
</li>
<li><p>多个进程之间的数据是不能直接共享的</p>
</li>
<li><p>浏览器运行是单进程还是多进程?是单线程还是多线程？</p>
</li>
</ul>
</li>
</ul>
<ul>
<li>有的是单进程 firefox/老版IE</li>
<li>有的是多进程 chrome/新版IE</li>
<li>都是多线程运行的</li>
</ul>
<ul>
<li>如何查看浏览器是否是多进程运行的呢?  任务管理器==&gt;进程</li>
</ul>
<h5 id="浏览器内核"><a href="#浏览器内核" class="headerlink" title="浏览器内核"></a>浏览器内核</h5><ul>
<li><p>什么是浏览器内核?</p>
<ul>
<li>支持浏览器运行的最核心的程序</li>
</ul>
</li>
<li><p>不同的浏览器，内核可能不一样</p>
<ul>
<li><p>Chrome, Safari: webkit</p>
</li>
<li><p>firefox: Gecko</p>
</li>
<li><p>IE: Trident</p>
</li>
<li><p>360,搜狗等国内浏览器: Trident + webkit</p>
</li>
</ul>
</li>
<li><p>内核由很多模块组成</p>
<ul>
<li>html,css文档解析模块 : 负责页面文本的解析</li>
<li>dom/css模块 : 负责dom/css在内存中的相关处理</li>
<li>布局和渲染模块 : 负责页面的布局和效果的绘制</li>
<li>布局和渲染模块 : 负责页面的布局和效果的绘制</li>
<li>定时器模块 : 负责定时器的管理</li>
<li>网络请求模块 : 负责服务器请求(常规/Ajax)</li>
<li>事件响应模块 : 负责事件的管理<h5 id="JS是单线程的"><a href="#JS是单线程的" class="headerlink" title="JS是单线程的"></a>JS是单线程的</h5></li>
</ul>
</li>
<li><p>如何证明js执行是单线程的?</p>
<ul>
<li><p>setTimeout()的回调函数是在主线程执行的</p>
</li>
<li><p>定时器回调函数只有在运行栈中的代码全部执行完后才有可能执行</p>
</li>
</ul>
</li>
<li><p>为什么js要用单线程模式, 而不用多线程模式?</p>
<ul>
<li><p>JavaScript的单线程，与它的用途有关。</p>
</li>
<li><p>作为浏览器脚本语言，JavaScript的主要用途是与用户互动，以及操作DOM。</p>
</li>
<li><p>这决定了它只能是单线程，否则会带来很复杂的同步问题</p>
</li>
</ul>
</li>
<li><p>js引擎执行代码的基本流程</p>
<ul>
<li><p>先执行初始化代码: 包含一些特别的代码(设置定时器、绑定监听、发送ajax请求)</p>
</li>
<li><p>后在某个时刻执行回调代码：处理回调代码</p>
</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;timeout 3&#x27;</span>)</span><br><span class="line">&#125;, <span class="number">3000</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;timeout 2&#x27;</span>)</span><br><span class="line">  alert(<span class="string">&#x27;2222&#x27;</span>)</span><br><span class="line">&#125;, <span class="number">2000</span>)</span><br><span class="line"></span><br><span class="line">alert(<span class="string">&#x27;提示...&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;alert之后&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li><p>事件循环模型</p>
<p><img src= "/img/loading.gif" data-src="/2020/08/06/web04/04.png" alt="04"></p>
<ul>
<li><p>执行初始化代码, 将事件回调函数交给对应<strong>模块管理</strong></p>
</li>
<li><p>当事件发生时, 管理模块会将回调函数及其数据添加到<strong>回调列队</strong>中</p>
</li>
<li><p>只有当初始化代码执行完后(可能要一定时间), 才会遍历读取回调队列中的回调函数执行</p>
</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params"></span>) </span>&#123;<span class="built_in">console</span>.log(<span class="string">&#x27;fn1()&#x27;</span>);&#125;</span><br><span class="line">fn1();</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">&#x27;btn&#x27;</span>).onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;处理点击事件&#x27;</span>)</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;到点了&#x27;</span>)</span><br><span class="line">&#125;, <span class="number">2000</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn2</span>(<span class="params"></span>) </span>&#123; <span class="built_in">console</span>.log(<span class="string">&#x27;fn2()&#x27;</span>);&#125;</span><br><span class="line">fn2();</span><br><span class="line"><span class="comment">/* 输出</span></span><br><span class="line"><span class="comment">            fn1()</span></span><br><span class="line"><span class="comment">            fn2()</span></span><br><span class="line"><span class="comment">           到点了</span></span><br><span class="line"><span class="comment">点击后 --&gt; 处理点击事件  </span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>setInterval()与setTimeout()</p>
<ul>
<li>setInterval的回调函数将尝试每隔100ms执行一次, 只要回调代码执行的时间不超过100ms就能定时</li>
<li>setTimeout的方式: 如果回调代码执行需要xms, 下次回调的时间就会被延迟xms</li>
</ul>
</blockquote>
<p>Web Workers</p>
<ol>
<li><p>H5规范提供了js分线程的实现, 取名为: Web Workers</p>
<p><img src= "/img/loading.gif" data-src="/2020/08/06/web04/05.png" alt="05"></p>
</li>
<li><p>相关API</p>
<ul>
<li>Worker: 构造函数, 加载分线程执行的js文件</li>
<li>Worker.prototype.onmessage: 用于接收另一个线程的回调函数</li>
<li>Worker.prototype.postMessage: 向另一个线程发送消息</li>
</ul>
</li>
<li><p>不足</p>
<ul>
<li>worker内代码不能操作DOM(更新UI)</li>
<li>不能跨域加载JS</li>
<li>不是每个浏览器都支持这个新特性</li>
</ul>
</li>
<li><p>应用</p>
</li>
</ol>
<ul>
<li><p>计算得到斐波那契数列中第n个数的值</p>
<ul>
<li><p>在主线程计算: 当位数较大时, 会阻塞主线程, 导致界面卡死</p>
</li>
<li><p>在分线程计算: 不会阻塞主线程</p>
</li>
</ul>
</li>
</ul>
<h4 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h4><h5 id="分号问题"><a href="#分号问题" class="headerlink" title="分号问题"></a>分号问题</h5><ol>
<li>js一条语句的后面可以不加分号</li>
<li>是否加分号是编码风格问题, 没有应该不应该，只有你自己喜欢不喜欢</li>
<li>在下面2种情况下不加分号会有问题<ul>
<li>小括号开头的前一条语句</li>
<li>中方括号开头的前一条语句</li>
</ul>
</li>
<li>解决办法: 在行首加分号</li>
<li>强有力的例子: vue.js库</li>
<li>知乎热议: <a target="_blank" rel="noopener" href="https://www.zhihu.com/question/20298345">https://www.zhihu.com/question/20298345</a></li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 情形一: 小括号开头的前一条语句</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">3</span></span><br><span class="line">;(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">错误理解: 将3看成是函数调用</span></span><br><span class="line"><span class="comment">var a = 3(function () &#123;</span></span><br><span class="line"><span class="comment">&#125;)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 情形二: 中方括号开头的前一条语句</span></span><br><span class="line"><span class="keyword">var</span> b = a</span><br><span class="line">;[<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>].forEach(<span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(item)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">错误理解:</span></span><br><span class="line"><span class="comment">a = b[5].forEach(function(e)&#123;</span></span><br><span class="line"><span class="comment">  console.log(e)</span></span><br><span class="line"><span class="comment">&#125;)</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h5 id="内存泄漏与内存溢出"><a href="#内存泄漏与内存溢出" class="headerlink" title="内存泄漏与内存溢出"></a>内存泄漏与内存溢出</h5><ol>
<li>内存溢出<ul>
<li>一种程序运行出现的错误</li>
<li>当程序运行需要的内存超过了剩余的内存时, 就出抛出内存溢出的错误</li>
</ul>
</li>
<li>内存泄露<ul>
<li>占用的内存没有及时释放</li>
<li>内存泄露积累多了就容易导致内存溢出</li>
<li>常见的内存泄露:<ul>
<li>意外的全局变量</li>
<li>没有及时清理的计时器或回调函数</li>
<li>闭包</li>
</ul>
</li>
</ul>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 内存溢出</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">100000</span>; i++) &#123;</span><br><span class="line">  obj[i] = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">10000000</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;------&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 内存泄露</span></span><br><span class="line"><span class="comment">// 意外的全局变量</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  a = [] <span class="comment">//不小心没有var定义</span></span><br><span class="line">&#125;</span><br><span class="line">fn()</span><br><span class="line"><span class="comment">// 没有及时清理的计时器</span></span><br><span class="line"><span class="built_in">setInterval</span>(<span class="function"><span class="keyword">function</span>  (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;----&#x27;</span>)</span><br><span class="line">&#125;, <span class="number">1000</span>)</span><br></pre></td></tr></table></figure>

</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">ttan12138</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://yoursite.com/2020/08/06/web04/">http://yoursite.com/2020/08/06/web04/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://yoursite.com" target="_blank">Hexo</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/web%E5%89%8D%E7%AB%AF/">web前端</a><a class="post-meta__tags" href="/tags/%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93/">知识总结</a><a class="post-meta__tags" href="/tags/JS/">JS</a><a class="post-meta__tags" href="/tags/%E8%BF%9B%E9%98%B6/">进阶</a></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2020/08/06/web02/"><img class="prev-cover" data-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Web前端 (2) CSS基础知识总结</div></div></a></div><div class="next-post pull-right"><a href="/2020/08/06/web05/"><img class="next-cover" data-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Web前端 (5) JS简单实践（一）</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2020/08/06/web05/" title="Web前端 (5) JS简单实践（一）"><img class="relatedPosts_cover" data-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-08-06</div><div class="relatedPosts_title">Web前端 (5) JS简单实践（一）</div></div></a></div><div class="relatedPosts_item"><a href="/2020/08/06/web03/" title="Web前端 (3) JavaScript基础知识总结"><img class="relatedPosts_cover" data-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-08-06</div><div class="relatedPosts_title">Web前端 (3) JavaScript基础知识总结</div></div></a></div><div class="relatedPosts_item"><a href="/2020/08/06/web01/" title="web前端 (1) Html基础知识总结"><img class="relatedPosts_cover" data-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-08-06</div><div class="relatedPosts_title">web前端 (1) Html基础知识总结</div></div></a></div><div class="relatedPosts_item"><a href="/2020/08/06/web02/" title="Web前端 (2) CSS基础知识总结"><img class="relatedPosts_cover" data-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-08-06</div><div class="relatedPosts_title">Web前端 (2) CSS基础知识总结</div></div></a></div></div></div></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020 By ttan12138</div><div class="framework-info"><span>驱动 </span><a target="_blank" rel="noopener" href="https://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><button id="readmode" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font_plus" title="放大字体"><i class="fas fa-plus"></i></button><button id="font_minus" title="缩小字体"><i class="fas fa-minus"></i></button><button class="translate_chn_to_cht" id="translateLink" title="简繁转换">繁</button><button id="darkmode" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" title="设置"><i class="fas fa-cog"></i></button><button class="close" id="mobile-toc-button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js" async></script></body></html>